<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE Trustworthy #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE NoImplicitPrelude #-}</span><span>
</span><a name="line-3"></a><span>
</span><a name="line-4"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-5"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-6"></a><span class="hs-comment">-- Module      :  Control.Monad</span><span>
</span><a name="line-7"></a><span class="hs-comment">-- Copyright   :  (c) The University of Glasgow 2001</span><span>
</span><a name="line-8"></a><span class="hs-comment">-- License     :  BSD-style (see the file libraries/base/LICENSE)</span><span>
</span><a name="line-9"></a><span class="hs-comment">--</span><span>
</span><a name="line-10"></a><span class="hs-comment">-- Maintainer  :  libraries@haskell.org</span><span>
</span><a name="line-11"></a><span class="hs-comment">-- Stability   :  provisional</span><span>
</span><a name="line-12"></a><span class="hs-comment">-- Portability :  portable</span><span>
</span><a name="line-13"></a><span class="hs-comment">--</span><span>
</span><a name="line-14"></a><span class="hs-comment">-- The 'Functor', 'Monad' and 'MonadPlus' classes,</span><span>
</span><a name="line-15"></a><span class="hs-comment">-- with some useful operations on monads.</span><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span>
</span><a name="line-18"></a><span>    </span><span class="hs-special">(</span><span>
</span><a name="line-19"></a><span>    </span><span class="hs-comment">-- * Functor and monad classes</span><span>
</span><a name="line-20"></a><span>
</span><a name="line-21"></a><span>      </span><a href="GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a><span class="hs-special">(</span><span class="hs-identifier">fmap</span><span class="hs-special">)</span><span>
</span><a name="line-22"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator">&gt;&gt;=</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator">&gt;&gt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">return</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fail</span><span class="hs-special">)</span><span>
</span><a name="line-23"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#MonadPlus"><span class="hs-identifier hs-type">MonadPlus</span></a><span class="hs-special">(</span><span class="hs-identifier">mzero</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mplus</span><span class="hs-special">)</span><span>
</span><a name="line-24"></a><span>    </span><span class="hs-comment">-- * Functions</span><span>
</span><a name="line-25"></a><span>
</span><a name="line-26"></a><span>    </span><span class="hs-comment">-- ** Naming conventions</span><span>
</span><a name="line-27"></a><span>    </span><span class="hs-comment">-- $naming</span><span>
</span><a name="line-28"></a><span>
</span><a name="line-29"></a><span>    </span><span class="hs-comment">-- ** Basic @Monad@ functions</span><span>
</span><a name="line-30"></a><span>
</span><a name="line-31"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span>
</span><a name="line-32"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span>
</span><a name="line-33"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a><span>
</span><a name="line-34"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a><span>
</span><a name="line-35"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Traversable.html#sequence"><span class="hs-identifier hs-var">sequence</span></a><span>
</span><a name="line-36"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a><span>
</span><a name="line-37"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-38"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Monad.html#%3E%3D%3E"><span class="hs-operator hs-var">&gt;=&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-39"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Monad.html#%3C%3D%3C"><span class="hs-operator hs-var">&lt;=&lt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-40"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#forever"><span class="hs-identifier hs-var">forever</span></a><span>
</span><a name="line-41"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span>    </span><span class="hs-comment">-- ** Generalisations of list functions</span><span>
</span><a name="line-44"></a><span>
</span><a name="line-45"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#join"><span class="hs-identifier hs-var">join</span></a><span>
</span><a name="line-46"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#msum"><span class="hs-identifier hs-var">msum</span></a><span>
</span><a name="line-47"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#mfilter"><span class="hs-identifier hs-var">mfilter</span></a><span>
</span><a name="line-48"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#filterM"><span class="hs-identifier hs-var">filterM</span></a><span>
</span><a name="line-49"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#mapAndUnzipM"><span class="hs-identifier hs-var">mapAndUnzipM</span></a><span>
</span><a name="line-50"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#zipWithM"><span class="hs-identifier hs-var">zipWithM</span></a><span>
</span><a name="line-51"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#zipWithM_"><span class="hs-identifier hs-var">zipWithM_</span></a><span>
</span><a name="line-52"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#foldM"><span class="hs-identifier hs-var">foldM</span></a><span>
</span><a name="line-53"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#foldM_"><span class="hs-identifier hs-var">foldM_</span></a><span>
</span><a name="line-54"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#replicateM"><span class="hs-identifier hs-var">replicateM</span></a><span>
</span><a name="line-55"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#replicateM_"><span class="hs-identifier hs-var">replicateM_</span></a><span>
</span><a name="line-56"></a><span>
</span><a name="line-57"></a><span>    </span><span class="hs-comment">-- ** Conditional execution of monadic expressions</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#guard"><span class="hs-identifier hs-var">guard</span></a><span>
</span><a name="line-60"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a><span>
</span><a name="line-61"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Control.Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span>    </span><span class="hs-comment">-- ** Monadic lifting operators</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#liftM"><span class="hs-identifier hs-var">liftM</span></a><span>
</span><a name="line-66"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#liftM2"><span class="hs-identifier hs-var">liftM2</span></a><span>
</span><a name="line-67"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#liftM3"><span class="hs-identifier hs-var">liftM3</span></a><span>
</span><a name="line-68"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#liftM4"><span class="hs-identifier hs-var">liftM4</span></a><span>
</span><a name="line-69"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#liftM5"><span class="hs-identifier hs-var">liftM5</span></a><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#ap"><span class="hs-identifier hs-var">ap</span></a><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span>    </span><span class="hs-comment">-- ** Strict monadic functions</span><span>
</span><a name="line-74"></a><span>
</span><a name="line-75"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Monad.html#%3C%24%21%3E"><span class="hs-operator hs-var">&lt;$!&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-76"></a><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Foldable.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Foldable</span></a><span> </span><span class="hs-special">(</span><span> </span><a href="Data.Foldable.html#Foldable"><span class="hs-identifier hs-type">Foldable</span></a><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#sequence_"><span class="hs-identifier hs-var">sequence_</span></a><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#sequenceA_"><span class="hs-identifier hs-var">sequenceA_</span></a><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#msum"><span class="hs-identifier hs-var">msum</span></a><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a><span class="hs-special">,</span><span> </span><a href="Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-79"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Functor.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Functor</span></a><span> </span><span class="hs-special">(</span><span> </span><a href="Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-80"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Traversable.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Traversable</span></a><span> </span><span class="hs-special">(</span><span> </span><a href="Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a><span class="hs-special">,</span><span> </span><a href="Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span class="hs-special">,</span><span> </span><a href="Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a><span class="hs-special">,</span><span> </span><a href="Data.Traversable.html#sequence"><span class="hs-identifier hs-var">sequence</span></a><span class="hs-special">,</span><span> </span><a href="Data.Traversable.html#sequenceA"><span class="hs-identifier hs-var">sequenceA</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-81"></a><span>
</span><a name="line-82"></a><span class="hs-keyword">import</span><span> </span><a href="GHC.Base.html"><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">Base</span></a><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span> </span><a href="GHC.Base.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#sequence"><span class="hs-identifier hs-var">sequence</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-83"></a><span class="hs-keyword">import</span><span> </span><a href="GHC.List.html"><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">List</span></a><span> </span><span class="hs-special">(</span><span> </span><a href="GHC.List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span class="hs-special">,</span><span> </span><a href="GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-84"></a><span class="hs-keyword">import</span><span> </span><a href="GHC.Num.html"><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">Num</span></a><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-85"></a><span>
</span><a name="line-86"></a><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><a name="line-87"></a><span class="hs-comment">-- Functions mandated by the Prelude</span><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span class="hs-comment">-- | @'guard' b@ is @'pure' ()@ if @b@ is 'True',</span><span>
</span><a name="line-90"></a><span class="hs-comment">-- and 'empty' if @b@ is 'False'.</span><span>
</span><a name="line-91"></a><span class="hs-identifier">guard</span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Alternative"><span class="hs-identifier hs-type">Alternative</span></a><span> </span><a href="#local-6989586621679329036"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329036"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-92"></a><a name="guard"><a href="Control.Monad.html#guard"><span class="hs-identifier">guard</span></a></a><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a><span>      </span><span class="hs-glyph">=</span><span>  </span><a href="GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-93"></a><span class="hs-identifier">guard</span><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a><span>     </span><span class="hs-glyph">=</span><span>  </span><a href="GHC.Base.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-94"></a><span>
</span><a name="line-95"></a><span class="hs-comment">-- | This generalizes the list-based 'filter' function.</span><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-pragma">{-# INLINE filterM #-}</span><span>
</span><a name="line-98"></a><span class="hs-identifier">filterM</span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679329034"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329035"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329034"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329035"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329034"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329035"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-99"></a><a name="filterM"><a href="Control.Monad.html#filterM"><span class="hs-identifier">filterM</span></a></a><span> </span><a name="local-6989586621679329037"><a href="#local-6989586621679329037"><span class="hs-identifier">p</span></a></a><span>        </span><span class="hs-glyph">=</span><span> </span><a href="GHC.Base.html#foldr"><span class="hs-identifier hs-var">foldr</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><a name="local-6989586621679329038"><a href="#local-6989586621679329038"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="GHC.Base.html#liftA2"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><a name="local-6989586621679329039"><a href="#local-6989586621679329039"><span class="hs-identifier">flg</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679329039"><span class="hs-identifier hs-var">flg</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329038"><span class="hs-identifier hs-var">x</span></a><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><a href="GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329037"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="#local-6989586621679329038"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-100"></a><span>
</span><a name="line-101"></a><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">1</span><span> </span><span class="hs-operator">&lt;=&lt;</span><span class="hs-special">,</span><span> </span><span class="hs-operator">&gt;=&gt;</span><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-comment">-- | Left-to-right Kleisli composition of monads.</span><span>
</span><a name="line-104"></a><span class="hs-special">(</span><span class="hs-operator">&gt;=&gt;</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">::</span><span> </span><a href="GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span> </span><a href="#local-6989586621679329030"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329031"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329030"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329032"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329032"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329030"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329033"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329031"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329030"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329033"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-105"></a><a name="local-6989586621679329040"><a href="#local-6989586621679329040"><span class="hs-identifier">f</span></a></a><span> </span><a name="%3E%3D%3E"><a href="Control.Monad.html#%3E%3D%3E"><span class="hs-operator">&gt;=&gt;</span></a></a><span> </span><a name="local-6989586621679329041"><a href="#local-6989586621679329041"><span class="hs-identifier">g</span></a></a><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679329042"><a href="#local-6989586621679329042"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329040"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679329042"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="#local-6989586621679329041"><span class="hs-identifier hs-var">g</span></a><span>
</span><a name="line-106"></a><span>
</span><a name="line-107"></a><span class="hs-comment">-- | Right-to-left Kleisli composition of monads. @('&gt;=&gt;')@, with the arguments flipped.</span><span>
</span><a name="line-108"></a><span class="hs-comment">--</span><span>
</span><a name="line-109"></a><span class="hs-comment">-- Note how this operator resembles function composition @('.')@:</span><span>
</span><a name="line-110"></a><span class="hs-comment">--</span><span>
</span><a name="line-111"></a><span class="hs-comment">-- &gt; (.)   ::            (b -&gt;   c) -&gt; (a -&gt;   b) -&gt; a -&gt;   c</span><span>
</span><a name="line-112"></a><span class="hs-comment">-- &gt; (&lt;=&lt;) :: Monad m =&gt; (b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c</span><span>
</span><a name="line-113"></a><span class="hs-special">(</span><span class="hs-operator">&lt;=&lt;</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">::</span><span> </span><a href="GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span> </span><a href="#local-6989586621679329026"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329027"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329026"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329028"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329029"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329026"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329027"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329029"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329026"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329028"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-114"></a><span class="hs-special">(</span><a name="%3C%3D%3C"><a href="Control.Monad.html#%3C%3D%3C"><span class="hs-operator">&lt;=&lt;</span></a></a><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><a href="GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a><span> </span><span class="hs-special">(</span><a href="Control.Monad.html#%3E%3D%3E"><span class="hs-operator hs-var">&gt;=&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-115"></a><span>
</span><a name="line-116"></a><span class="hs-comment">-- | @'forever' act@ repeats the action infinitely.</span><span>
</span><a name="line-117"></a><span class="hs-identifier">forever</span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679329023"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679329023"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679329024"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329023"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679329025"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-118"></a><span class="hs-pragma">{-# INLINE forever #-}</span><span>
</span><a name="line-119"></a><a name="forever"><a href="Control.Monad.html#forever"><span class="hs-identifier">forever</span></a></a><span> </span><a name="local-6989586621679329043"><a href="#local-6989586621679329043"><span class="hs-identifier">a</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679329044"><a href="#local-6989586621679329044"><span class="hs-identifier">a'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679329043"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a><span> </span><a href="#local-6989586621679329044"><span class="hs-identifier hs-var">a'</span></a><span> </span><span class="hs-keyword">in</span><span> </span><a href="#local-6989586621679329044"><span class="hs-identifier hs-var">a'</span></a><span>
</span><a name="line-120"></a><span class="hs-comment">-- Use explicit sharing here, as it prevents a space leak regardless of</span><span>
</span><a name="line-121"></a><span class="hs-comment">-- optimizations.</span><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><a name="line-124"></a><span class="hs-comment">-- Other monad functions</span><span>
</span><a name="line-125"></a><span>
</span><a name="line-126"></a><span class="hs-comment">-- | The 'mapAndUnzipM' function maps its first argument over a list, returning</span><span>
</span><a name="line-127"></a><span class="hs-comment">-- the result as a pair of lists. This function is mainly used with complicated</span><span>
</span><a name="line-128"></a><span class="hs-comment">-- data structures or a state-transforming monad.</span><span>
</span><a name="line-129"></a><span class="hs-identifier">mapAndUnzipM</span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679329019"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329020"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329019"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329021"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">,</span><a href="#local-6989586621679329022"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329020"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329019"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="#local-6989586621679329021"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329022"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span class="hs-pragma">{-# INLINE mapAndUnzipM #-}</span><span>
</span><a name="line-131"></a><a name="mapAndUnzipM"><a href="Control.Monad.html#mapAndUnzipM"><span class="hs-identifier">mapAndUnzipM</span></a></a><span> </span><a name="local-6989586621679329045"><a href="#local-6989586621679329045"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679329046"><a href="#local-6989586621679329046"><span class="hs-identifier">xs</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><a href="GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a><span> </span><a href="Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a><span> </span><a href="Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a><span> </span><a href="#local-6989586621679329045"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679329046"><span class="hs-identifier hs-var">xs</span></a><span>
</span><a name="line-132"></a><span>
</span><a name="line-133"></a><span class="hs-comment">-- | The 'zipWithM' function generalizes 'zipWith' to arbitrary applicative functors.</span><span>
</span><a name="line-134"></a><span class="hs-identifier">zipWithM</span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679329015"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329016"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329017"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329015"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329018"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329016"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329017"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329015"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329018"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">]</span><span>
</span><a name="line-135"></a><span class="hs-pragma">{-# INLINE zipWithM #-}</span><span>
</span><a name="line-136"></a><a name="zipWithM"><a href="Control.Monad.html#zipWithM"><span class="hs-identifier">zipWithM</span></a></a><span> </span><a name="local-6989586621679329047"><a href="#local-6989586621679329047"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679329048"><a href="#local-6989586621679329048"><span class="hs-identifier">xs</span></a></a><span> </span><a name="local-6989586621679329049"><a href="#local-6989586621679329049"><span class="hs-identifier">ys</span></a></a><span>  </span><span class="hs-glyph">=</span><span>  </span><a href="Data.Traversable.html#sequenceA"><span class="hs-identifier hs-var">sequenceA</span></a><span> </span><span class="hs-special">(</span><a href="GHC.List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span> </span><a href="#local-6989586621679329047"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679329048"><span class="hs-identifier hs-var">xs</span></a><span> </span><a href="#local-6989586621679329049"><span class="hs-identifier hs-var">ys</span></a><span class="hs-special">)</span><span>
</span><a name="line-137"></a><span>
</span><a name="line-138"></a><span class="hs-comment">-- | 'zipWithM_' is the extension of 'zipWithM' which ignores the final result.</span><span>
</span><a name="line-139"></a><span class="hs-identifier">zipWithM_</span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679329011"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329012"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329013"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329011"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329014"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329012"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679329013"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329011"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-140"></a><span class="hs-pragma">{-# INLINE zipWithM_ #-}</span><span>
</span><a name="line-141"></a><a name="zipWithM_"><a href="Control.Monad.html#zipWithM_"><span class="hs-identifier">zipWithM_</span></a></a><span> </span><a name="local-6989586621679329050"><a href="#local-6989586621679329050"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679329051"><a href="#local-6989586621679329051"><span class="hs-identifier">xs</span></a></a><span> </span><a name="local-6989586621679329052"><a href="#local-6989586621679329052"><span class="hs-identifier">ys</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><a href="Data.Foldable.html#sequenceA_"><span class="hs-identifier hs-var">sequenceA_</span></a><span> </span><span class="hs-special">(</span><a href="GHC.List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span> </span><a href="#local-6989586621679329050"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679329051"><span class="hs-identifier hs-var">xs</span></a><span> </span><a href="#local-6989586621679329052"><span class="hs-identifier hs-var">ys</span></a><span class="hs-special">)</span><span>
</span><a name="line-142"></a><span>
</span><a name="line-143"></a><span class="hs-comment">{- | The 'foldM' function is analogous to 'foldl', except that its result is
encapsulated in a monad. Note that 'foldM' works from left-to-right over
the list arguments. This could be an issue where @('&gt;&gt;')@ and the `folded
function' are not commutative.


&gt;       foldM f a1 [x1, x2, ..., xm]

==

&gt;       do
&gt;         a2 &lt;- f a1 x1
&gt;         a3 &lt;- f a2 x2
&gt;         ...
&gt;         f am xm

If right-to-left evaluation is required, the input list should be reversed.

Note: 'foldM' is the same as 'foldlM'
-}</span><span>
</span><a name="line-163"></a><span>
</span><a name="line-164"></a><span class="hs-identifier">foldM</span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Foldable.html#Foldable"><span class="hs-identifier hs-type">Foldable</span></a><span> </span><a href="#local-6989586621679329007"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span> </span><a href="#local-6989586621679329008"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329009"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329010"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329008"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329009"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329009"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329007"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679329010"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329008"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329009"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-165"></a><span class="hs-pragma">{-# INLINABLE foldM #-}</span><span>
</span><a name="line-166"></a><span class="hs-pragma">{-# SPECIALISE foldM :: (a -&gt; b -&gt; IO a) -&gt; a -&gt; [b] -&gt; IO a #-}</span><span>
</span><a name="line-167"></a><span class="hs-pragma">{-# SPECIALISE foldM :: (a -&gt; b -&gt; Maybe a) -&gt; a -&gt; [b] -&gt; Maybe a #-}</span><span>
</span><a name="line-168"></a><a name="foldM"><a href="Control.Monad.html#foldM"><span class="hs-identifier">foldM</span></a></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Data.Foldable.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a><span>
</span><a name="line-169"></a><span>
</span><a name="line-170"></a><span class="hs-comment">-- | Like 'foldM', but discards the result.</span><span>
</span><a name="line-171"></a><span class="hs-identifier">foldM_</span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Foldable.html#Foldable"><span class="hs-identifier hs-type">Foldable</span></a><span> </span><a href="#local-6989586621679328999"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">,</span><span> </span><a href="GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span> </span><a href="#local-6989586621679329000"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329001"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329002"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329000"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679329001"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329001"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328999"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679329002"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679329000"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-172"></a><span class="hs-pragma">{-# INLINABLE foldM_ #-}</span><span>
</span><a name="line-173"></a><span class="hs-pragma">{-# SPECIALISE foldM_ :: (a -&gt; b -&gt; IO a) -&gt; a -&gt; [b] -&gt; IO () #-}</span><span>
</span><a name="line-174"></a><span class="hs-pragma">{-# SPECIALISE foldM_ :: (a -&gt; b -&gt; Maybe a) -&gt; a -&gt; [b] -&gt; Maybe () #-}</span><span>
</span><a name="line-175"></a><a name="foldM_"><a href="Control.Monad.html#foldM_"><span class="hs-identifier">foldM_</span></a></a><span> </span><a name="local-6989586621679329053"><a href="#local-6989586621679329053"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679329054"><a href="#local-6989586621679329054"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679329055"><a href="#local-6989586621679329055"><span class="hs-identifier">xs</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Data.Foldable.html#foldlM"><span class="hs-identifier hs-var">foldlM</span></a><span> </span><a href="#local-6989586621679329053"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679329054"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679329055"><span class="hs-identifier hs-var">xs</span></a><span> </span><a href="GHC.Base.html#%3E%3E"><span class="hs-operator hs-var">&gt;&gt;</span></a><span> </span><a href="GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-176"></a><span>
</span><a name="line-177"></a><span class="hs-comment">{-
Note [Worker/wrapper transform on replicateM/replicateM_]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The implementations of replicateM and replicateM_ both leverage the
worker/wrapper transform. The simpler implementation of replicateM_, as an
example, would be:

    replicateM_ 0 _ = pure ()
    replicateM_ n f = f *&gt; replicateM_ (n - 1) f

However, the self-recursive nature of this implementation inhibits inlining,
which means we never get to specialise to the action (`f` in the code above).
By contrast, the implementation below with a local loop makes it possible to
inline the entire definition (as happens for foldr, for example) thereby
specialising for the particular action.

For further information, see this Trac comment, which includes side-by-side
Core: https://ghc.haskell.org/trac/ghc/ticket/11795#comment:6
-}</span><span>
</span><a name="line-197"></a><span>
</span><a name="line-198"></a><span class="hs-comment">-- | @'replicateM' n act@ performs the action @n@ times,</span><span>
</span><a name="line-199"></a><span class="hs-comment">-- gathering the results.</span><span>
</span><a name="line-200"></a><span class="hs-identifier">replicateM</span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679328993"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328993"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679328994"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328993"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679328994"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-201"></a><span class="hs-pragma">{-# INLINABLE replicateM #-}</span><span>
</span><a name="line-202"></a><span class="hs-pragma">{-# SPECIALISE replicateM :: Int -&gt; IO a -&gt; IO [a] #-}</span><span>
</span><a name="line-203"></a><span class="hs-pragma">{-# SPECIALISE replicateM :: Int -&gt; Maybe a -&gt; Maybe [a] #-}</span><span>
</span><a name="line-204"></a><a name="replicateM"><a href="Control.Monad.html#replicateM"><span class="hs-identifier">replicateM</span></a></a><span> </span><a name="local-6989586621679329056"><a href="#local-6989586621679329056"><span class="hs-identifier">cnt0</span></a></a><span> </span><a name="local-6989586621679329057"><a href="#local-6989586621679329057"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-205"></a><span>    </span><a href="#local-6989586621679329058"><span class="hs-identifier hs-var">loop</span></a><span> </span><a href="#local-6989586621679329056"><span class="hs-identifier hs-var">cnt0</span></a><span>
</span><a name="line-206"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-207"></a><span>    </span><a name="local-6989586621679329058"><a href="#local-6989586621679329058"><span class="hs-identifier">loop</span></a></a><span> </span><a name="local-6989586621679329059"><a href="#local-6989586621679329059"><span class="hs-identifier">cnt</span></a></a><span>
</span><a name="line-208"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679329059"><span class="hs-identifier hs-var">cnt</span></a><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a><span> </span><span class="hs-number">0</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-209"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="GHC.Base.html#liftA2"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679329057"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329058"><span class="hs-identifier hs-var">loop</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329059"><span class="hs-identifier hs-var">cnt</span></a><span> </span><span class="hs-glyph">-</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-210"></a><span>
</span><a name="line-211"></a><span class="hs-comment">-- | Like 'replicateM', but discards the result.</span><span>
</span><a name="line-212"></a><span class="hs-identifier">replicateM_</span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679328989"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328989"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679328990"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328989"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-213"></a><span class="hs-pragma">{-# INLINABLE replicateM_ #-}</span><span>
</span><a name="line-214"></a><span class="hs-pragma">{-# SPECIALISE replicateM_ :: Int -&gt; IO a -&gt; IO () #-}</span><span>
</span><a name="line-215"></a><span class="hs-pragma">{-# SPECIALISE replicateM_ :: Int -&gt; Maybe a -&gt; Maybe () #-}</span><span>
</span><a name="line-216"></a><a name="replicateM_"><a href="Control.Monad.html#replicateM_"><span class="hs-identifier">replicateM_</span></a></a><span> </span><a name="local-6989586621679329060"><a href="#local-6989586621679329060"><span class="hs-identifier">cnt0</span></a></a><span> </span><a name="local-6989586621679329061"><a href="#local-6989586621679329061"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-217"></a><span>    </span><a href="#local-6989586621679329062"><span class="hs-identifier hs-var">loop</span></a><span> </span><a href="#local-6989586621679329060"><span class="hs-identifier hs-var">cnt0</span></a><span>
</span><a name="line-218"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-219"></a><span>    </span><a name="local-6989586621679329062"><a href="#local-6989586621679329062"><span class="hs-identifier">loop</span></a></a><span> </span><a name="local-6989586621679329063"><a href="#local-6989586621679329063"><span class="hs-identifier">cnt</span></a></a><span>
</span><a name="line-220"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679329063"><span class="hs-identifier hs-var">cnt</span></a><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a><span> </span><span class="hs-number">0</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-221"></a><span>        </span><span class="hs-glyph">|</span><span> </span><a href="GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679329061"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a><span> </span><a href="#local-6989586621679329062"><span class="hs-identifier hs-var">loop</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679329063"><span class="hs-identifier hs-var">cnt</span></a><span> </span><span class="hs-glyph">-</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span>
</span><a name="line-222"></a><span>
</span><a name="line-223"></a><span>
</span><a name="line-224"></a><span class="hs-comment">-- | The reverse of 'when'.</span><span>
</span><a name="line-225"></a><span class="hs-identifier">unless</span><span>            </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a><span> </span><a href="#local-6989586621679328986"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328986"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328986"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-226"></a><span class="hs-pragma">{-# INLINABLE unless #-}</span><span>
</span><a name="line-227"></a><span class="hs-pragma">{-# SPECIALISE unless :: Bool -&gt; IO () -&gt; IO () #-}</span><span>
</span><a name="line-228"></a><span class="hs-pragma">{-# SPECIALISE unless :: Bool -&gt; Maybe () -&gt; Maybe () #-}</span><span>
</span><a name="line-229"></a><a name="unless"><a href="Control.Monad.html#unless"><span class="hs-identifier">unless</span></a></a><span> </span><a name="local-6989586621679329064"><a href="#local-6989586621679329064"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679329065"><a href="#local-6989586621679329065"><span class="hs-identifier">s</span></a></a><span>        </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679329064"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><a href="#local-6989586621679329065"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-230"></a><span>
</span><a name="line-231"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="hs-operator">&lt;$!&gt;</span><span>
</span><a name="line-232"></a><span>
</span><a name="line-233"></a><span class="hs-comment">-- | Strict version of 'Data.Functor.&lt;$&gt;'.</span><span>
</span><a name="line-234"></a><span class="hs-comment">--</span><span>
</span><a name="line-235"></a><span class="hs-comment">-- @since 4.8.0.0</span><span>
</span><a name="line-236"></a><span class="hs-special">(</span><span class="hs-operator">&lt;$!&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a><span> </span><a href="#local-6989586621679328983"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679328984"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328985"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328983"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679328984"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328983"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679328985"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-237"></a><span class="hs-pragma">{-# INLINE (&lt;$!&gt;) #-}</span><span>
</span><a name="line-238"></a><a name="local-6989586621679329066"><a href="#local-6989586621679329066"><span class="hs-identifier">f</span></a></a><span> </span><a name="%3C%24%21%3E"><a href="Control.Monad.html#%3C%24%21%3E"><span class="hs-operator">&lt;$!&gt;</span></a></a><span> </span><a name="local-6989586621679329067"><a href="#local-6989586621679329067"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-239"></a><span>  </span><a name="local-6989586621679329068"><a href="#local-6989586621679329068"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679329067"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-240"></a><span>  </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679329069"><a href="#local-6989586621679329069"><span class="hs-identifier">z</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679329066"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679329068"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-241"></a><span>  </span><a href="#local-6989586621679329069"><span class="hs-identifier hs-var">z</span></a><span> </span><span class="hs-special">`</span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Prim.html#seq"><span class="hs-identifier hs-var">seq</span></a><span class="hs-special">`</span><span> </span><a href="GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-6989586621679329069"><span class="hs-identifier hs-var">z</span></a><span>
</span><a name="line-242"></a><span>
</span><a name="line-243"></a><span>
</span><a name="line-244"></a><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><a name="line-245"></a><span class="hs-comment">-- Other MonadPlus functions</span><span>
</span><a name="line-246"></a><span>
</span><a name="line-247"></a><span class="hs-comment">-- | Direct 'MonadPlus' equivalent of 'filter'</span><span>
</span><a name="line-248"></a><span class="hs-comment">-- @'filter'@ = @(mfilter:: (a -&gt; Bool) -&gt; [a] -&gt; [a]@</span><span>
</span><a name="line-249"></a><span class="hs-comment">-- applicable to any 'MonadPlus', for example</span><span>
</span><a name="line-250"></a><span class="hs-comment">-- @mfilter odd (Just 1) == Just 1@</span><span>
</span><a name="line-251"></a><span class="hs-comment">-- @mfilter odd (Just 2) == Nothing@</span><span>
</span><a name="line-252"></a><span>
</span><a name="line-253"></a><span class="hs-identifier">mfilter</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="GHC.Base.html#MonadPlus"><span class="hs-identifier hs-type">MonadPlus</span></a><span> </span><a href="#local-6989586621679328981"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679328982"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../ghc-prim-0.5.1.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328981"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679328982"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679328981"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679328982"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-254"></a><span class="hs-pragma">{-# INLINABLE mfilter #-}</span><span>
</span><a name="line-255"></a><a name="mfilter"><a href="Control.Monad.html#mfilter"><span class="hs-identifier">mfilter</span></a></a><span> </span><a name="local-6989586621679329070"><a href="#local-6989586621679329070"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679329071"><a href="#local-6989586621679329071"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-256"></a><span>  </span><a name="local-6989586621679329072"><a href="#local-6989586621679329072"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679329071"><span class="hs-identifier hs-var">ma</span></a><span>
</span><a name="line-257"></a><span>  </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679329070"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="#local-6989586621679329072"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a><span> </span><a href="#local-6989586621679329072"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-keyword">else</span><span> </span><a href="GHC.Base.html#mzero"><span class="hs-identifier hs-var">mzero</span></a><span>
</span><a name="line-258"></a><span>
</span><a name="line-259"></a><span class="hs-comment">{- $naming

The functions in this library use the following naming conventions:

* A postfix \'@M@\' always stands for a function in the Kleisli category:
  The monad type constructor @m@ is added to function results
  (modulo currying) and nowhere else.  So, for example,

&gt;  filter  ::              (a -&gt;   Bool) -&gt; [a] -&gt;   [a]
&gt;  filterM :: (Monad m) =&gt; (a -&gt; m Bool) -&gt; [a] -&gt; m [a]

* A postfix \'@_@\' changes the result type from @(m a)@ to @(m ())@.
  Thus, for example:

&gt;  sequence  :: Monad m =&gt; [m a] -&gt; m [a]
&gt;  sequence_ :: Monad m =&gt; [m a] -&gt; m ()

* A prefix \'@m@\' generalizes an existing function to a monadic form.
  Thus, for example:

&gt;  sum  :: Num a       =&gt; [a]   -&gt; a
&gt;  msum :: MonadPlus m =&gt; [m a] -&gt; m a

-}</span><span>
</span><a name="line-283"></a></pre></body></html>